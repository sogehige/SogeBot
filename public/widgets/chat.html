<div class="widget">
    <ul class="nav nav-pills" role="tablist">
      <li role="presentation" class="active">
        <a href="#chat-room" aria-controls="home" role="tab" data-toggle="tab" title="Betting templates">
          <span class="curViewers"></span> <i class="fa fa-eye" aria-hidden="true"></i>
        </a>
      </li>
      <li role="presentation">
        <a href="#chat-settings" aria-controls="home" role="tab" data-toggle="tab" title="Settings">
          <i class="fa fa-cog" aria-hidden="true"></i>
        </a>
      </li>
    </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="chat-room">
   </div> <!-- /CHAT-ROOM -->

    <div role="tabpanel" class="tab-pane" id="chat-settings">
      <button type="button" class="btn btn-danger btn-block" onclick="deleteWidget('bets')" style="margin-top: 20px;">Remove widget</button>
    </div> <!-- /SETTINGS -->
</div>

<script>
  socket.off('chatMessage')
  var chat = {
    $chatRoom: $("#chat-room"),
    showMessage: function (data) {
      this.$chatRoom.append('<div class="chat-block">' +
        '<span class="chat-time">' + moment().format('HH:mm:ss') + '</span><span class="chat-username">' + data.username + '</span>' +
        '<span class="chat-message">' + data.message + '</span>' +
      '</div>')

      // scroll down
      this.$chatRoom.animate({
        scrollTop: this.$chatRoom.prop('scrollHeight')},
        500
      );
    }
  }

  socket.on('chatMessage', function (data) { chat.showMessage(data)})
</script>

<!--script>
  if (loadedJS.indexOf('chat') === -1) {
    loadedJS.push('chat')
    socket.emit('getChatRoom');
    socket.on('chatRoom', function(room) {
      $("#chatWidget").html('<iframe frameborder="0" scrolling="no" src="http://twitch.tv/' + room + '/chat?popout=" width="100%"></iframe>')
    })
  }
</script-->